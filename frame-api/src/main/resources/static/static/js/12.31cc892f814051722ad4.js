webpackJsonp([12],{P8dB:function(t,e,a){var n=a("jg0G");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("7db8e704",n,!0)},iFAo:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"department-manage",components:{treeTable:a("s3ol").a},data:function(){return{baseUrl:"/api/ucenter/department",table:{data:[],columns:[{text:"部门名称",value:"departmentName",width:150},{text:"组织名称",value:"organizationName",width:150},{text:"备注",value:"remark"}]},organizationOptions:[],dialogAddDepartment:{data:{organizationId:"",departmentName:"",remark:"",pid:[],sort:1},visible:!1,cascaderOptions:[],cascaderDisabled:!0},dialogEditDepartment:{data:{id:-1,departmentName:"",remark:"",parentName:"",sort:1},visible:!1}}},methods:{loadTreeData:function(){var t=this;t.$request.get(t.baseUrl+"/tree_table.json").then(function(e){t.table.data=e.data})},handleEditRow:function(t){var e=this,a=t.id;e.dialogEditDepartment.data.id=a,e.$request.get("/api/ucenter/department/?id="+a).then(function(t){e.dialogEditDepartment.data.parentName=t.data.parentName,e.dialogEditDepartment.data.remark=t.data.remark,e.dialogEditDepartment.data.departmentName=t.data.departmentName,e.dialogEditDepartment.sort=t.data.sort,e.dialogEditDepartment.visible=!0})},handleDeleteRow:function(t){var e=this,a=t.id;this.$confirm("删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$request.delete("/api/ucenter/department?id="+a).then(function(t){e.$message.success(t.message)})})},handleAddDepartmentSubmit:function(){var t=this,e=t.dialogAddDepartment.data;console.log(e),e.pid=e.pid?e.pid[e.pid.length-1]:null,t.$request.post("/api/ucenter/department",e).then(function(e){t.$message.success(e.message),t.dialogAddDepartment.visible=!1,t.loadTreeData()})},handleAddDepartmentButton:function(){this.dialogAddDepartment.data={organizationId:"",departmentName:"",remark:"",address:"",phone:"",pid:[],sort:1},this.dialogAddDepartment.cascaderOptions=[],this.dialogAddDepartment.cascaderDisabled=!0,this.loadOrganizationOptions(),this.dialogAddDepartment.visible=!0},handleEditDepartmentSubmit:function(){var t=this;t.$request.put("/ucenter/manage/department",t.dialogEditDepartment.data).then(function(e){t.$message.success(e.message),t.dialogEditDepartment.visible=!1,t.loadTreeData()})},loadOrganizationOptions:function(){var t=this;t.$request.get("/api/ucenter/organization/select.json").then(function(e){t.organizationOptions=e.data})},handleOrganizationOptionChanged:function(t){console.log(t);var e=this;e.$request.get("/api/ucenter/department/cascader.json?organizationId="+t).then(function(t){e.dialogAddDepartment.cascaderOptions=t.data,e.dialogAddDepartment.cascaderDisabled=!1})}},mounted:function(){this.loadTreeData()}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-contain-holder"},[a("div",{staticStyle:{"align-content":"center"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("部门列表")]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-left":"3px"},attrs:{type:"primary"},on:{click:t.handleAddDepartmentButton}},[t._v("添 加 ")]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-right":"3px"},attrs:{type:"primary"},on:{click:t.loadTreeData}},[t._v("刷 新 ")])],1),t._v(" "),a("div",[a("tree-table",{attrs:{data:t.table.data,columns:t.table.columns,expandAll:"",border:""}},[a("el-table-column",{attrs:{label:"操作",width:"250px",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(a){t.handleEditRow(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",round:"",size:"small"},on:{click:function(a){t.handleDeleteRow(e.row)}}},[t._v("删除")])]}}])})],1)],1)])],1),t._v(" "),a("el-dialog",{attrs:{title:"添加部门",width:"700px",visible:t.dialogAddDepartment.visible},on:{"update:visible":function(e){t.$set(t.dialogAddDepartment,"visible",e)}}},[a("div",[a("el-form",{ref:"form",attrs:{model:t.dialogAddDepartment.data,size:"small","label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"组织"}},[a("el-select",{attrs:{placeholder:"必选"},on:{change:t.handleOrganizationOptionChanged},model:{value:t.dialogAddDepartment.data.organizationId,callback:function(e){t.$set(t.dialogAddDepartment.data,"organizationId",e)},expression:"dialogAddDepartment.data.organizationId"}},t._l(t.organizationOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"上级部门"}},[a("el-cascader",{attrs:{"change-on-select":"",disabled:t.dialogAddDepartment.cascaderDisabled,placeholder:"为空则为一级部门",options:t.dialogAddDepartment.cascaderOptions,clearable:""},model:{value:t.dialogAddDepartment.data.pid,callback:function(e){t.$set(t.dialogAddDepartment.data,"pid",e)},expression:"dialogAddDepartment.data.pid"}})],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"部门名称"}},[a("el-input",{attrs:{placeholder:""},model:{value:t.dialogAddDepartment.data.departmentName,callback:function(e){t.$set(t.dialogAddDepartment.data,"departmentName",e)},expression:"dialogAddDepartment.data.departmentName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{model:{value:t.dialogAddDepartment.data.remark,callback:function(e){t.$set(t.dialogAddDepartment.data,"remark",e)},expression:"dialogAddDepartment.data.remark"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序值"}},[a("el-input",{attrs:{type:"number"},model:{value:t.dialogAddDepartment.data.sort,callback:function(e){t.$set(t.dialogAddDepartment.data,"sort",e)},expression:"dialogAddDepartment.data.sort"}})],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogAddDepartment.visible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleAddDepartmentSubmit}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"修改部门",width:"600px",visible:t.dialogEditDepartment.visible},on:{"update:visible":function(e){t.$set(t.dialogEditDepartment,"visible",e)}}},[a("div",[a("el-form",{ref:"form",attrs:{model:t.dialogEditDepartment.data,size:"small","label-width":"120px"}},[a("el-form-item",{attrs:{label:"上级部门名称"}},[a("el-input",{attrs:{disabled:"",placeholder:""},model:{value:t.dialogEditDepartment.data.parentName,callback:function(e){t.$set(t.dialogEditDepartment.data,"parentName",e)},expression:"dialogEditDepartment.data.parentName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"部门名称"}},[a("el-input",{attrs:{placeholder:""},model:{value:t.dialogEditDepartment.data.departmentName,callback:function(e){t.$set(t.dialogEditDepartment.data,"departmentName",e)},expression:"dialogEditDepartment.data.departmentName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{placeholder:""},model:{value:t.dialogEditDepartment.data.address,callback:function(e){t.$set(t.dialogEditDepartment.data,"address",e)},expression:"dialogEditDepartment.data.address"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{attrs:{placeholder:""},model:{value:t.dialogEditDepartment.data.phone,callback:function(e){t.$set(t.dialogEditDepartment.data,"phone",e)},expression:"dialogEditDepartment.data.phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{model:{value:t.dialogEditDepartment.data.remark,callback:function(e){t.$set(t.dialogEditDepartment.data,"remark",e)},expression:"dialogEditDepartment.data.remark"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序值"}},[a("el-input",{attrs:{type:"number"},model:{value:t.dialogEditDepartment.data.sort,callback:function(e){t.$set(t.dialogEditDepartment.data,"sort",e)},expression:"dialogEditDepartment.data.sort"}})],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogEditDepartment.visible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleEditDepartmentSubmit}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var i=a("VU/8")(n,d,!1,function(t){a("P8dB")},"data-v-17fff705",null);e.default=i.exports},jg0G:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.custom-tree-node[data-v-17fff705] {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  font-size: 14px;\n  padding-right: 8px;\n}\n",""])}});