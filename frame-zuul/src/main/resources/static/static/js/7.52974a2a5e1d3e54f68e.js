webpackJsonp([7],{"R/hd":function(e,t,a){var l=a("aRzn");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a("rjj0")("3280a3cc",l,!0)},aRzn:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.filter-container[data-v-f2fb7b24]{\n  margin-bottom: 15px;\n}\n",""])},iCQF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("vLgD"),i={name:"manage-user-index",data:function(){var e=this;return{table:{data:[],searchValue:"",loading:!1},pagination:{currentPage:1,pageSizes:[20,30,50,100],pageSize:20,total:0},dialogAddUser:{rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{validator:function(e,t,a){""===t&&a(new Error("请输入用户名")),l.a.get("/ucenter/manage/user/check-username.json?username="+t).then(function(e){e.data?a(new Error("用户名已经存在")):a()})},trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],rePassword:[{validator:function(t,a,l){""===a?l(new Error("请再次输入密码")):a!==e.dialogAddUser.data.password?l(new Error("两次输入密码不一致!")):l()},trigger:"blur"},{required:!0,message:"请输入密码",trigger:"blur"}],email:[{required:!0,message:"请输入Email",trigger:"blur"},{validator:function(e,t,a){""===t&&a(new Error("请输入邮箱")),l.a.get("/ucenter/manage/user/check-email.json?email="+t).then(function(e){e.data?a(new Error("邮箱已经存在")):a()})},trigger:"blur"}]},data:{username:"",password:"",rePassword:"",email:""},visible:!1,title:"添加角色",type:"add"},dialogEditUserRole:{visible:!1,selectedRole:[],roleList:[],uuid:""}}},methods:{handleSizeChange:function(e){},handleCurrentChange:function(e){},loadTableData:function(){var e=this;e.table.loading=!0;var t="/ucenter/manage/user/datatable.json?page_num="+e.pagination.currentPage+"&page_size="+e.pagination.pageSize+"&search_value="+e.table.searchValue;e.$request.get(t).then(function(t){e.pagination=t.pagination,e.table.data=t.data,e.table.loading=!1})},onSearch:function(){},handleAddRoleSubmit:function(){var e=this;console.log("handleAddRoleSubmit"),"add"===e.dialogAddUser.type?(console.log("handleAddRoleSubmit1"),e.$refs.form.validate(function(t){if(console.log("handleAddRoleSubmit2"),!t)return e.$message.warning("验证失败，请检查表单"),!1;console.log("handleAddRoleSubmit3"),e.$request.post("/ucenter/manage/user/add",e.dialogAddUser.data).then(function(t){e.$message.success(t.message),e.dialogAddUser.visible=!1,e.loadTableData()})})):"edit"===e.dialogAddUser.type&&e.$request.put("/api/system/role",e.dialogAddUser.data).then(function(t){e.$message.success(t.message),e.dialogAddUser.visible=!1,e.loadTableData()})},handleAddUserButton:function(){this.resetForm(),this.dialogAddUser.visible=!0,this.dialogAddUser.title="添加用户",this.dialogAddUser.type="add"},handleEditRow:function(e){var t=e.uuid;this.$router.push("/system/manage/edit-user/"+t)},handleCheckUser:function(e){this.$router.push("/system/manage/check-user/"+e.uuid)},handleDeleteRow:function(e){var t=e.uuid,a=this;this.$confirm("删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$request.get("/ucenter/manage/user/delete?uuid="+t).then(function(e){a.$message.success(e.message),a.loadTreeDate()})})},resetForm:function(){},handleEditUserRoleRow:function(e){var t=this,a=e.uuid;t.dialogEditUserRole.uuid=a,t.$request.get("/ucenter/manage/role/transfer-list.json?uuid="+a).then(function(e){t.dialogEditUserRole.roleList=e.data.roleList,t.dialogEditUserRole.selectedRole=e.data.selectedRole,t.dialogEditUserRole.visible=!0})},handleEditUserRoleSubmit:function(){var e=this,t={uuid:e.dialogEditUserRole.uuid,selectedRole:e.dialogEditUserRole.selectedRole};e.$request.put("/ucenter/manage/role/user-role.json",t).then(function(t){e.$message.success(t.message),e.dialogEditUserRole.visible=!1})}},mounted:function(){this.loadTableData()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-contain-holder"},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px",float:"right","margin-left":"10px"},attrs:{placeholder:"搜索"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.onSearch(t)}},model:{value:e.table.searchValue,callback:function(t){e.$set(e.table,"searchValue",t)},expression:"table.searchValue"}}),e._v(" "),a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:e.loadTableData}},[a("svg-icon",{attrs:{"icon-class":"refresh"}}),e._v("刷新")],1),e._v(" "),a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:e.handleAddUserButton}},[e._v("添加")])],1),e._v(" "),a("el-table",{staticStyle:{"margin-top":"15px"},attrs:{data:e.table.data,stripe:"",border:"",loading:e.table.loading}},[a("el-table-column",{attrs:{label:"ID",align:"center",type:"index",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户名",prop:"username"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.handleCheckUser(t.row)}}},[e._v(e._s(t.row.username))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{label:"电话",prop:"phone"}}),e._v(" "),a("el-table-column",{attrs:{label:"email",prop:"email"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"250px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(a){e.handleEditRow(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",round:""},on:{click:function(a){e.handleEditUserRoleRow(t.row)}}},[e._v("编辑角色")]),e._v(" "),a("el-button",{attrs:{type:"danger",round:"",size:"small"},on:{click:function(a){e.handleDeleteRow(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{padding:"15px",float:"right"}},[a("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":e.pagination.pageSizes,"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{attrs:{slot:"other"},slot:"other"},[a("el-dialog",{attrs:{title:e.dialogAddUser.title,width:"600px",visible:e.dialogAddUser.visible},on:{"update:visible":function(t){e.$set(e.dialogAddUser,"visible",t)}}},[a("div",[a("el-form",{ref:"form",attrs:{model:e.dialogAddUser.data,"label-width":"80px",rules:e.dialogAddUser.rules}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:e.dialogAddUser.data.username,callback:function(t){e.$set(e.dialogAddUser.data,"username",t)},expression:"dialogAddUser.data.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.dialogAddUser.data.password,callback:function(t){e.$set(e.dialogAddUser.data,"password",t)},expression:"dialogAddUser.data.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"rePassword"}},[a("el-input",{attrs:{type:"password"},model:{value:e.dialogAddUser.data.rePassword,callback:function(t){e.$set(e.dialogAddUser.data,"rePassword",t)},expression:"dialogAddUser.data.rePassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"email",prop:"email"}},[a("el-input",{model:{value:e.dialogAddUser.data.email,callback:function(t){e.$set(e.dialogAddUser.data,"email",t)},expression:"dialogAddUser.data.email"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogAddUser.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleAddRoleSubmit}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"编辑角色",visible:e.dialogEditUserRole.visible},on:{"update:visible":function(t){e.$set(e.dialogEditUserRole,"visible",t)}}},[a("div",[a("el-transfer",{attrs:{filterable:"",titles:["待选角色","已选角色"],data:e.dialogEditUserRole.roleList},model:{value:e.dialogEditUserRole.selectedRole,callback:function(t){e.$set(e.dialogEditUserRole,"selectedRole",t)},expression:"dialogEditUserRole.selectedRole"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogEditUserRole.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleEditUserRoleSubmit}},[e._v("保  存")])],1)])],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,r,!1,function(e){a("R/hd")},"data-v-f2fb7b24",null);t.default=s.exports}});