webpackJsonp([1],{PfcQ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"menu-tree-table",components:{treeTable:a("s3ol").a},data:function(){return{treeData:{activePanelName:"first",data:[],defaultProps:{children:"children",label:"label"}},dialogAddMenu:{visible:!1,type:"add",data:{title:"",name:"",pid:[],component:"",path:"",redirect:"",icon:"",enabled:!0,alwaysShow:!0,hidden:!1,remark:"",sort:1,meta:""},cascaderOptions:[]},editMenu:{data:{permissionId:"",title:"",name:"",pid:[],component:"",path:"",redirect:"",icon:"",enabled:!0,alwaysShow:!0,hidden:!1,remark:"",sort:1,meta:""},cascaderOptions:[]},baseUrl:"/api/ucenter/sys/menu"}},methods:{loadTreeData:function(){var e=this;e.$request.get("/api/ucenter/sys/menu/tree_table.json").then(function(t){e.data=t.data})},handleAddButton:function(){var e=this;e.$request.get(e.baseUrl+"/cascader.json").then(function(t){e.dialogAddMenu.cascaderOptions=t.data,e.dialogAddMenu.visible=!0})},handleAddMenuSubmit:function(){var e=this,t=e.dialogAddMenu.data;t.pid=e.dialogAddMenu.data.pid.pop(),e.$request.post(e.baseUrl,t).then(function(t){e.$message.success(t.message),e.dialogAddMenu.visible=!1,e.loadTreeData(),e.$refs.form.resetFields()})},handleDeleteRow:function(e,t){var a=t.id,n=this;this.$confirm("删除, 是否继续?删除菜单会删除相应的权限，建议禁用即可","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.$request.delete(n.baseUrl+"?id="+a).then(function(e){n.$message.success(e.message),n.loadMenuTreeData()})})},handleEditMenuSubmit:function(){var e=this,t=e.editMenu.data;t.pid=e.editMenu.data.pid.pop(),e.$request.put(e.baseUrl,t).then(function(t){e.$message.success(t.message),e.editMenu.visible=!1,e.loadTreeData()})},loadMenuTreeData:function(){var e=this;e.$request.get("/api/ucenter/sys/menu/menu_tree.json").then(function(t){e.treeData.data=t.data.treeList})},treeNodeClick:function(e){console.log(e);var t=e.id,a=this;a.editMenu.data.permissionId=t,a.$request.get(a.baseUrl+"/cascader.json").then(function(e){a.editMenu.cascaderOptions=e.data,a.$request.get(a.baseUrl+"?id="+t).then(function(e){a.editMenu.data=e.data.content,a.editMenu.data.pid=e.data.pids})})}},mounted:function(){this.loadTreeData(),this.loadMenuTreeData()}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-contain-holder"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("菜单列表")]),e._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-left":"3px"},attrs:{type:"primary"},on:{click:e.handleAddButton}},[e._v("添 加\n      ")]),e._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-right":"3px"},attrs:{type:"primary"},on:{click:e.loadTreeData}},[e._v("刷 新\n      ")])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-tree",{attrs:{data:e.treeData.data,"highlight-current":"","default-expand-all":"",props:e.treeData.defaultProps},on:{"node-click":e.treeNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(n.label))]),e._v(" "),a("span",[a("el-button",{staticStyle:{padding:"3px"},attrs:{type:"primary",size:"mini",icon:"el-icon-plus",circle:""},on:{click:function(){return e.append(l)}}}),e._v(" "),a("el-button",{staticStyle:{padding:"3px","margin-left":"0px"},attrs:{type:"danger",size:"mini",icon:"el-icon-delete",circle:""},on:{click:function(){return e.handleDeleteRow(n,l)}}})],1)])}}])})],1),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-tabs",{attrs:{type:"card"},model:{value:e.treeData.activePanelName,callback:function(t){e.$set(e.treeData,"activePanelName",t)},expression:"treeData.activePanelName"}},[a("el-tab-pane",{attrs:{label:"属性",name:"first"}},[a("el-form",{ref:"edidForm",attrs:{model:e.editMenu.data,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"上级菜单"}},[a("el-cascader",{attrs:{"change-on-select":"",placeholder:"顶级菜单",options:e.editMenu.cascaderOptions},model:{value:e.editMenu.data.pid,callback:function(t){e.$set(e.editMenu.data,"pid",t)},expression:"editMenu.data.pid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"title"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.editMenu.data.title,callback:function(t){e.$set(e.editMenu.data,"title",t)},expression:"editMenu.data.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"name"}},[a("el-input",{model:{value:e.editMenu.data.name,callback:function(t){e.$set(e.editMenu.data,"name",t)},expression:"editMenu.data.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"component"}},[a("el-input",{model:{value:e.editMenu.data.component,callback:function(t){e.$set(e.editMenu.data,"component",t)},expression:"editMenu.data.component"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"path"}},[a("el-input",{model:{value:e.editMenu.data.path,callback:function(t){e.$set(e.editMenu.data,"path",t)},expression:"editMenu.data.path"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"redirect"}},[a("el-input",{model:{value:e.editMenu.data.redirect,callback:function(t){e.$set(e.editMenu.data,"redirect",t)},expression:"editMenu.data.redirect"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"icon"}},[a("el-input",{model:{value:e.editMenu.data.icon,callback:function(t){e.$set(e.editMenu.data,"icon",t)},expression:"editMenu.data.icon"}})],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"enabled"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.editMenu.data.enabled,callback:function(t){e.$set(e.editMenu.data,"enabled",t)},expression:"editMenu.data.enabled"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"alwaysShow","label-width":"100px"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.editMenu.data.alwaysShow,callback:function(t){e.$set(e.editMenu.data,"alwaysShow",t)},expression:"editMenu.data.alwaysShow"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"hidden"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.editMenu.data.hidden,callback:function(t){e.$set(e.editMenu.data,"hidden",t)},expression:"editMenu.data.hidden"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}})],1),e._v(" "),a("el-form-item",{attrs:{label:"description"}},[a("el-input",{model:{value:e.editMenu.data.remark,callback:function(t){e.$set(e.editMenu.data,"remark",t)},expression:"editMenu.data.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"sort"}},[a("el-input",{attrs:{type:"number"},model:{value:e.editMenu.data.sort,callback:function(t){e.$set(e.editMenu.data,"sort",t)},expression:"editMenu.data.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"meta"}},[a("el-input",{model:{value:e.editMenu.data.meta,callback:function(t){e.$set(e.editMenu.data,"meta",t)},expression:"editMenu.data.meta"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleEditMenuSubmit}},[e._v("保存更改")])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"API",name:"second"}},[e._v("配置管理")])],1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加菜单",width:"1000px",visible:e.dialogAddMenu.visible},on:{"update:visible":function(t){e.$set(e.dialogAddMenu,"visible",t)}}},[a("div",[a("el-form",{ref:"form",attrs:{model:e.dialogAddMenu.data,"label-width":"80px",size:"small"}},[a("el-row",[a("el-form-item",{attrs:{label:"上级菜单"}},[a("el-cascader",{attrs:{"change-on-select":"",options:e.dialogAddMenu.cascaderOptions},model:{value:e.dialogAddMenu.data.pid,callback:function(t){e.$set(e.dialogAddMenu.data,"pid",t)},expression:"dialogAddMenu.data.pid"}})],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"title"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.dialogAddMenu.data.title,callback:function(t){e.$set(e.dialogAddMenu.data,"title",t)},expression:"dialogAddMenu.data.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"name"}},[a("el-input",{model:{value:e.dialogAddMenu.data.name,callback:function(t){e.$set(e.dialogAddMenu.data,"name",t)},expression:"dialogAddMenu.data.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"component"}},[a("el-input",{model:{value:e.dialogAddMenu.data.component,callback:function(t){e.$set(e.dialogAddMenu.data,"component",t)},expression:"dialogAddMenu.data.component"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"path"}},[a("el-input",{model:{value:e.dialogAddMenu.data.path,callback:function(t){e.$set(e.dialogAddMenu.data,"path",t)},expression:"dialogAddMenu.data.path"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"redirect"}},[a("el-input",{model:{value:e.dialogAddMenu.data.redirect,callback:function(t){e.$set(e.dialogAddMenu.data,"redirect",t)},expression:"dialogAddMenu.data.redirect"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"icon"}},[a("el-input",{model:{value:e.dialogAddMenu.data.icon,callback:function(t){e.$set(e.dialogAddMenu.data,"icon",t)},expression:"dialogAddMenu.data.icon"}})],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"enabled"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.dialogAddMenu.data.enabled,callback:function(t){e.$set(e.dialogAddMenu.data,"enabled",t)},expression:"dialogAddMenu.data.enabled"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"alwaysShow","label-width":"100px"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.dialogAddMenu.data.alwaysShow,callback:function(t){e.$set(e.dialogAddMenu.data,"alwaysShow",t)},expression:"dialogAddMenu.data.alwaysShow"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"hidden"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.dialogAddMenu.data.hidden,callback:function(t){e.$set(e.dialogAddMenu.data,"hidden",t)},expression:"dialogAddMenu.data.hidden"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"description"}},[a("el-input",{model:{value:e.dialogAddMenu.data.remark,callback:function(t){e.$set(e.dialogAddMenu.data,"remark",t)},expression:"dialogAddMenu.data.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"sort"}},[a("el-input",{attrs:{type:"number"},model:{value:e.dialogAddMenu.data.sort,callback:function(t){e.$set(e.dialogAddMenu.data,"sort",t)},expression:"dialogAddMenu.data.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"meta"}},[a("el-input",{model:{value:e.dialogAddMenu.data.meta,callback:function(t){e.$set(e.dialogAddMenu.data,"meta",t)},expression:"dialogAddMenu.data.meta"}})],1)],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",round:""},on:{click:function(t){e.dialogAddMenu.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:e.handleAddMenuSubmit}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var d=a("VU/8")(n,l,!1,function(e){a("wiPd")},"data-v-3623df64",null);t.default=d.exports},qP4G:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.custom-tree-node[data-v-3623df64] {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  font-size: 14px;\n  padding-right: 8px;\n}\n",""])},wiPd:function(e,t,a){var n=a("qP4G");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("5a7ab7c0",n,!0)}});